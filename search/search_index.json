{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Pr\u00e1ctica: Configuraci\u00f3n de Servidor Nginx como Proxy Inverso","text":""},{"location":"#introduccion","title":"Introducci\u00f3n","text":"<p>Un proxy es un servidor que act\u00faa como intermediario entre los clientes y los servidores web. Existen dos tipos principales: - Proxy de reenv\u00edo: intercepta las solicitudes de los clientes antes de enviarlas a los servidores de origen. - Proxy inverso: intercepta las solicitudes entrantes y las redirige a los servidores web, mejorando seguridad, balanceo de carga y rendimiento.</p> <p>En esta pr\u00e1ctica configuraremos un servidor proxy inverso con Nginx para redirigir las solicitudes hacia otro servidor Nginx que act\u00faa como servidor web. Utilizaremos dos m\u00e1quinas Debian virtuales: una como proxy inverso y la otra como servidor web.</p>"},{"location":"#configuracion-inicial","title":"Configuraci\u00f3n inicial","text":"<ol> <li>Clonaci\u00f3n de la m\u00e1quina virtual:<ul> <li>Clonamos la m\u00e1quina virtual Debian ya configurada con Nginx (de la pr\u00e1ctica anterior).</li> <li>Durante la clonaci\u00f3n, asegurarse de generar una nueva direcci\u00f3n MAC para evitar conflictos de red.</li> </ul> </li> </ol>"},{"location":"#servidor-web-webserver","title":"Servidor Web (Webserver)","text":"<ol> <li> <p>Renombrar la configuraci\u00f3n del servidor web:</p> <ul> <li>Cambiar el nombre del archivo de configuraci\u00f3n de Nginx a <code>webserver</code>.</li> </ul> <p><code>bash sudo mv /etc/nginx/sites-available/Practica2Daw /etc/nginx/sites-available/webserver</code></p> <ul> <li>Dentro del archivo, actualizar las referencias al nombre del sitio web.</li> </ul> <p><code>bash sudo nano /etc/nginx/sites-available/webserver</code></p> </li> <li> <p>Modificar el puerto del servidor web:</p> <ul> <li>Cambiar el puerto de escucha de 80 a 8080 en el archivo de configuraci\u00f3n.</li> </ul> <p><code>nginx server {     listen 8080;     server_name webserver;     root /var/www/webserver;     index index.html; }</code></p> </li> <li> <p>Eliminar el enlace simb\u00f3lico anterior y crear uno nuevo:</p> <p><code>bash sudo unlink /etc/nginx/sites-enabled/Practica2Daw sudo ln -s /etc/nginx/sites-available/webserver /etc/nginx/sites-enabled/</code></p> </li> <li> <p>Reiniciar Nginx:</p> <p><code>bash sudo systemctl restart nginx</code></p> </li> </ol>"},{"location":"#servidor-proxy-inverso-proxy","title":"Servidor Proxy Inverso (Proxy)","text":"<ol> <li> <p>Crear un archivo de configuraci\u00f3n para el proxy inverso:</p> <ul> <li>Crear un nuevo archivo de configuraci\u00f3n en <code>/etc/nginx/sites-available/</code> llamado <code>Practica2Daw</code>.</li> </ul> <p><code>bash sudo nano /etc/nginx/sites-available/Practica2Daw</code></p> <p></p> </li> <li> <p>Configuraci\u00f3n del proxy inverso:</p> <ul> <li>Dentro del archivo, configurar el proxy para redirigir las solicitudes al servidor web (<code>webserver:8080</code>).</li> </ul> <p><code>nginx server {     listen 80;     server_name Practica2Daw;     location / {         proxy_pass http://webserver:8080;     } }</code></p> <p></p> </li> <li> <p>Crear un enlace simb\u00f3lico para activar el proxy:</p> <p><code>bash sudo ln -s /etc/nginx/sites-available/Practica2Daw /etc/nginx/sites-enabled/</code></p> <p></p> </li> <li> <p>Reiniciar Nginx en el servidor proxy:</p> <p><code>bash sudo systemctl restart nginx</code></p> </li> </ol>"},{"location":"#modificacion-del-archivo-hosts","title":"Modificaci\u00f3n del archivo hosts","text":"<ul> <li> <p>Para asociar el nombre de dominio del proxy con su direcci\u00f3n IP, modificar el archivo <code>/etc/hosts</code> en la m\u00e1quina anfitriona:</p> <p><code>bash sudo nano /etc/hosts</code></p> <p>A\u00f1adir la siguiente l\u00ednea, reemplazando <code>IP_DEL_PROXY</code> por la direcci\u00f3n IP real:</p> <p><code>bash IP_DEL_PROXY proxy</code></p> </li> </ul>"},{"location":"#comprobaciones","title":"Comprobaciones","text":"<ol> <li> <p>Comprobaci\u00f3n en el navegador:</p> <ul> <li>Acceder a <code>http://proxy</code> desde el navegador. Si todo est\u00e1 configurado correctamente, se deber\u00eda redirigir al servidor web en <code>webserver:8080</code>.</li> </ul> </li> <li> <p>Verificaci\u00f3n de logs:</p> <ul> <li>Comprobar que las peticiones llegan tanto al servidor proxy como al servidor web revisando los archivos de logs:</li> </ul> <p><code>bash sudo tail -f /var/log/nginx/access.log</code></p> </li> </ol>"},{"location":"#anadir-cabeceras","title":"A\u00f1adir cabeceras","text":"<ol> <li> <p>Configurar cabeceras en el proxy:</p> <ul> <li>En el archivo de configuraci\u00f3n del proxy (<code>proxy</code>), agregar una cabecera personalizada.</li> </ul> <p><code>nginx server {     listen 80;     server_name Practica2Daw;     location / {         proxy_pass http://webserver:8080;         add_header Host Practica2Daw;     } }</code></p> </li> <li> <p>Configurar cabeceras en el servidor web:</p> <ul> <li>En el archivo de configuraci\u00f3n del servidor web (<code>webserver</code>), agregar una cabecera personalizada:</li> </ul> <p><code>nginx server {     listen 8080;     server_name webserver;     root /var/www/webserver;     index index.html;     location / {         add_header Host Servidor_web_tunombre;     } }</code></p> </li> <li> <p>Reiniciar Nginx en ambos servidores:</p> <p><code>bash sudo systemctl restart nginx</code></p> </li> <li> <p>Comprobaci\u00f3n de cabeceras:</p> <ul> <li>Utilizando las herramientas de desarrollo del navegador (F12 &gt; Red), verificar que las cabeceras personalizadas est\u00e1n presentes en las respuestas del proxy inverso y del servidor web.</li> </ul> </li> </ol>"},{"location":"#conclusion","title":"Conclusi\u00f3n","text":"<p>Con esta configuraci\u00f3n, se ha implementado un servidor Nginx como proxy inverso que redirige las solicitudes a otro servidor web Nginx. Se ha demostrado el paso de las solicitudes mediante logs y cabeceras personalizadas, garantizando que las peticiones pasan por el proxy antes de llegar al servidor web final.</p>"}]}